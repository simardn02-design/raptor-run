enum ActionKind {
    Walking,
    Idle,
    Jumping,
    Dead
}
namespace SpriteKind {
    export const Ground = SpriteKind.create()
    export const Cloud = SpriteKind.create()
}
function initGround () {
    ground1 = sprites.create(img`
        ...................................................................................cccc...........................................................................
        ..................................................................................c....c..........................................................................
        cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc......ccccccccccccccccc....ccccccccccccccccccccccccccccccccccccccccccccccccccccc
        .........................................................................................................cccc.....................................................
        ..................................................................................................................................................................
        ..cccc..c.......................c..cccc.........................cccc..c.............c..........................cccc..c...........c..ccc.................c..ccc....
        ..................................................................................................................................................................
        ...............cccc..c.........................cccc.c.......c..............cc.c........cccc..c.....cccc..c..................c...............cccc..c...............
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        `, SpriteKind.Ground)
    ground2 = sprites.create(img`
        .....................................................cccc..................cccc...................................................................................
        ....................................................c....c................c....c..................................................................................
        cccccccccccccccccccccccccccccccccccccccccccccccccccc......cccccccccccccccc......cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ....ccc..c.................ccc..c...........c..cccc..........................c.............c..cccc.........................cccc..c.......................c..cccc..
        ..................................................................................................................................................................
        ...............c..cccc...............c..................c..cccc.....c..cccc........c.cc..............c.......c.cccc.........................c..cccc...............
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        `, SpriteKind.Ground)
    ground1.setPosition(scene.screenWidth() / 2, 120)
    ground2.setPosition(ground1.x + scene.screenWidth(), 120)
    ground1.vx = -100
    ground2.vx = -100
    ground1.z = 2
    ground2.z = 2
}
function initRaptor () {
    raptor = sprites.create(img`
        ..........ffffffffff............
        ..........ddddffffff............
        ..........dddddfffff............
        ..........dddddddddf............
        ..........dddddfdddd............
        ..ddddddd.dddddddddd............
        .fddddddd.ddddddfffd............
        .fffddddd.ddddddfffd............
        .ffff.....dddddddddd............
        .fff......dddddddddd............
        .ffff........ddd................
        .ffff......f.ffff...............
        .ffffffff..fffffffff............
        ..fffffff..ffffffffffffff.......
        ..ffffffffffffffffffffffff......
        ..fffffffffffffffffffffffff.....
        .....ffffffffffffffffffffff.....
        .......ffffffffffffffffffff.....
        ..........fffffffff..ffffff.....
        eeeeee....fffffffff..ffffff.....
        eeeeee....fffffffff..ffffff.....
        eeeeee...66666666666.dddddd.....
        ..6666..6666666666666dddddd.....
        ..6666666666.....6666dddddd.....
        ..6666666666......666...........
        ..6666666666......666...........
        ..6666666666......666...........
        ...666666666......666...........
        ..................eeeeee........
        ..................eeeeee........
        ..................eeeeeeee......
        ..................eeeeeeee......
        `, SpriteKind.Player)
    run = animation.createAnimation(ActionKind.Walking, 100)
    run.addAnimationFrame(img`
        ..........ffffffffff............
        ..........ddddffffff............
        ..........dddddfffff............
        ..........dddddddddf...ddddd....
        ..........dddddfdddd...ddddd....
        ..........dddddddddd...dddddff..
        ..........ddddddfffd......ffff..
        ..........ddddddfffd......ffff..
        ..........dddddddddd......fff...
        ..........dddddddddd....fffff...
        .............ddd.......ffffff...
        ...........f.ffff.....fffffff...
        .ffffffff..ffffff.....fffffff...
        .ffffffff..fffffffff..fffffff...
        .ffffffffffffffffffffffffffff...
        .fffffffffffffffffffffffffff....
        ffffffffffffffffffffffffffff....
        ffffff.ffffffffffffffffff.......
        ffffff....fffffffff.............
        ffffff....fffffffff.............
        .fffff....fffffffff.............
        .fffff....666666666.............
        .fffff....6666666666....eeeeee..
        .dddddd...6666666666....eeeeee..
        .dddddd..66666666666....eeeeee..
        .dddddd..66666666666...6eee.....
        ..ddddd..66666..6666..666e6.....
        ..dddd...66666..66666666666.....
        .........66666...666666666......
        ......eeeeeeeee..666666666......
        ......eeeeeeeee..66666666.......
        ......eeeeeeeee.................
        `)
    run.addAnimationFrame(img`
        ..........ffffffffff............
        ..........ddddffffff............
        ..........dddddfffff............
        ..........dddddddddf............
        ..........dddddfdddd............
        ..ddddddd.dddddddddd............
        .fddddddd.ddddddfffd............
        .fffddddd.ddddddfffd............
        .ffff.....dddddddddd............
        .fff......dddddddddd............
        .ffff........ddd................
        .ffff......f.ffff...............
        .ffffffff..fffffffff............
        ..fffffff..ffffffffffffff.......
        ..ffffffffffffffffffffffff......
        ..fffffffffffffffffffffffff.....
        .....ffffffffffffffffffffff.....
        .......ffffffffffffffffffff.....
        ..........fffffffff..ffffff.....
        eeeeee....fffffffff..ffffff.....
        eeeeee....fffffffff..ffffff.....
        eeeeee...66666666666.dddddd.....
        ..6666..6666666666666dddddd.....
        ..6666666666.....6666dddddd.....
        ..6666666666......666...........
        ..6666666666......666...........
        ..6666666666......666...........
        ...666666666......666...........
        ..................eeeeee........
        ..................eeeeee........
        ..................eeeeeeee......
        ..................eeeeeeee......
        `)
    animation.attachAnimation(raptor, run)
    jump = animation.createAnimation(ActionKind.Jumping, 200)
    jump.addAnimationFrame(img`
        ..........ffffffffff............
        ..........ddddffffff............
        ..........dddddfffff............
        ..........dddddddddf...ddddd....
        ..........dddddfdddd...ddddd....
        ..ddddddd.dddddddddd...dddddff..
        .fddddddd.ddddddfffd......ffff..
        .fffddddd.ddddddfffd......ffff..
        .ffff.....dddddddddd......fff...
        .fff......dddddddddd....fffff...
        .ffff........ddd.......ffffff...
        .ffff......f.ffff.....fffffff...
        .ffffffff..ffffff.....fffffff...
        ..fffffff..fffffffff..fffffff...
        ..fffffffffffffffffffffffffff...
        ..ffffffffffffffffffffffffff....
        .....fffffffffffffffffffffff....
        ..eeee.ffffffffffffffffff.eeee..
        ..eeee....fffffffff.......eeee..
        ..eeee....fffffffff.......eeee..
        ..eeee....fffffffff.......eeee..
        ..6666666666666666666666666666..
        ..6666666666666666666666666666..
        ..6666666666666666666666666666..
        ..6666666666666666666666666666..
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `)
    animation.attachAnimation(raptor, jump)
    dead = animation.createAnimation(ActionKind.Dead, 200)
    dead.addAnimationFrame(img`
        ..........ffffffffff............
        ..........ddddffffff............
        ..........dddddfff88............
        ..........ddddddd88f...ddddd....
        ..........ddddd88888...ddddd....
        ..ddddddd.d88888d888...dddddff..
        .fdddddd88888d8dff8d8.....ffff..
        .fffdd88d88d88ddff8888....ffff..
        .fff88.88.88dddddd8d88....fff...
        .f88.88..8ddddddddd8.88.fffff...
        88f88...8....ddd...8..8ffffff...
        888f8.88...f.ffff..8..88fffff...
        8fff88fff..ffffff...8888fffff...
        ..ff8ffff..fffffffff.88ffffff...
        ..fffffffffffffffffffffffffff...
        ..ffffffffffffffffffffffffff....
        .....fffffffffffffffffffffff....
        .......ffffffffffffffffff.......
        ..........fffffffff.............
        ..........fffffffff.............
        ..........ffffffff2222.22.......
        .........66662222262222..2......
        ........6662262222266...22......
        ........6222222226666.22222.....
        .......222222222222222222..22...
        ......222222222...2222...22.....
        .....222226.....22226.222.......
        ........666.22222266222.........
        ......ee2222222222222222222.....
        ......eeeee22..222eeeeee...2....
        ....eeee22222222..eeeeeeee22222.
        ....e222222.22....eeeeeeee......
        `)
    animation.attachAnimation(raptor, dead)
    raptor.z = 3
    raptor.setPosition(15, 94)
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    end = 1
    animation.setAction(raptor, ActionKind.Dead)
    pause(50)
    game.over(false, effects.dissolve)
})
controller.anyButton.onEvent(ControllerButtonEvent.Pressed, function () {
    if (raptor.y == 94 && end == 0) {
        raptor.vy = -160
        animation.setAction(raptor, ActionKind.Jumping)
    }
})
let cloud: Sprite = null
let cactus: Sprite = null
let choice = 0
let dead: animation.Animation = null
let jump: animation.Animation = null
let run: animation.Animation = null
let raptor: Sprite = null
let ground2: Sprite = null
let ground1: Sprite = null
let end = 0
let idle = null
game.setDialogCursor(img`
    ..........ffffffffff............
    ..........ddddffffff............
    ..........dddddfffff............
    ..........dddddddddf...ddddd....
    ..........dddddfdddd...ddddd....
    ..ddddddd.dddddddddd...dddddff..
    .fddddddd.ddddddfffd......ffff..
    .fffddddd.ddddddfffd......ffff..
    .ffff.....dddddddddd......fff...
    .fff......dddddddddd....fffff...
    .ffff........ddd.......ffffff...
    .ffff......f.ffff.....fffffff...
    .ffffffff..ffffff.....fffffff...
    ..fffffff..fffffffff..fffffff...
    ..fffffffffffffffffffffffffff...
    ..ffffffffffffffffffffffffff....
    .....fffffffffffffffffffffff....
    .......ffffffffffffffffff.......
    ..........fffffffff.............
    ..........fffffffff.............
    ..........fffffffff.............
    .........66666666666............
    ........6666666666666...........
    ........6666.....6666...........
    ........666.......666...........
    ........666.......666...........
    ........666.......666...........
    ........666.......666...........
    ......eeeee.......eeeeee........
    ......eeeee.......eeeeee........
    ....eeeeeee.......eeeeeeee......
    ....eeeeeee.......eeeeeeee......
    `)
game.splash("HITLER RUN")
scene.setBackgroundColor(1)
initGround()
initRaptor()
info.setScore(0)
end = 0
game.showLongText("Press any button to jump.", DialogLayout.Top)
game.onUpdate(function () {
    if (raptor.y < 94) {
        raptor.ay = 400
    } else {
        raptor.ay = 0
        raptor.y = 94
        if (end == 0) {
            animation.setAction(raptor, ActionKind.Walking)
        }
    }
})
game.onUpdateInterval(50, function () {
    info.changeScoreBy(1)
})
game.onUpdateInterval(1000, function () {
    ground1.vx += -1
    ground2.vx += -1
})
game.onUpdateInterval(1000, function () {
    choice = randint(0, 4)
    if (choice == 0) {
        cactus = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ..........2222222...............
            ......22222222222...............
            ......222222222222..............
            ......222222222222..............
            ......222222222222..............
            ......2222222222222.............
            ......22222222222222............
            ......222222222222222...........
            ......22222fff2222222...........
            ......2222fffff22222222.........
            ......2222ffffff22222222........
            ......222ffffffff22222222.......
            ......222fffffffff2222222.......
            .....2222fffffffffff222222......
            ....22222ffffffffffff22222......
            ....22222fffffffffffff2222......
            ....2222ffffffffffffffff........
            .....fffffffffffffffffff........
            .....ffffffffffffffffffff.......
            .....ffffffffffffffffffff.......
            .....fffffffffffffffffffff......
            .....fffffffffffffffffffff......
            .....fffffffffffffffffffff......
            .....fffffffffffffffffffff......
            .....fffffffffffffffffffff......
            .....fffffffffffffffffffff......
            .....fffffffffffffffffffff......
            `, ground1.vx, 0)
        cactus.y = 94
        cactus.z = 2
    } else if (choice == 1) {
        cactus = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ............222222..............
            ............222222..............
            ..........22222222..............
            ..........22222222222...........
            ..........22222222222...........
            ...........2222222222...........
            ........22222222222222..........
            ........22222222222222..........
            ........22222222222222..........
            .........ffffffffffff...........
            .........ffffffffffff...........
            .........fffffffffffff..........
            ........ffffffffffffff..........
            ........fffffffffffffff.........
            ........fffffffffffffff.........
            .......ffffffffffffffff.........
            .......fffffffffffffffff........
            ......ffffffffffffffffff........
            ......fffffffffffffffffff.......
            ......fffffffffffffffffff.......
            .....ffffffffffffffffffff.......
            .....ffffffffffffffffffff.......
            .....ffffffffffffffffffff.......
            .....ffffffffffffffffffff.......
            .....fffffffffffffffffff........
            `, ground1.vx, 0)
        cactus.y = 94
        cactus.z = 2
    } else if (choice == 2) {
        cactus = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................f...............
            ................ff..............
            ...............ffff.............
            ...............ffff.............
            ..............ffffff............
            .............fffffff............
            ............fffffffff...........
            ............ffffffffff..........
            ..........fffffffffffff.........
            ..........fffffffffffff.........
            .........fffffffffffffff........
            .........ffffffffffffffff.......
            `, ground1.vx, 0)
        cactus.y = 94
        cactus.z = 2
    }
})
game.onUpdateInterval(1500, function () {
    if (Math.percentChance(40)) {
        cloud = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            .........................77777..
            ........................7ffffff7
            ...............7777777fffffffff7
            .............7777ffffffffffffff7
            ...........ffffffffffffffffffff7
            ........fffffffffffffffffffffff7
            ........ffffffffffffffffffffff77
            .......ffffffffffffffffffff7777.
            ......fffffffffffffff7777777777.
            ......fffffffff77777777777777777
            ffff.ffffffff7777777777777777777
            ffffffffffff77777777777777777777
            ffffffffffff77777777777777777777
            fffffffffff777777777777777777777
            fffffffffff777777777777777777777
            ffffffffff777777777ffffffff77777
            7777777777777777777ffffffff777..
            7777777fffffff77777ffffffff.....
            77777fffffffff7777.ffffffff.....
            77777fffffffff.....ffffffff.....
            777..fffffffff.....ffffffff.....
            .....fffffffff.....ffffffff.....
            .....fffffffff......fffffff.....
            `, ground1.vx / 4, 0)
        cloud.y = randint(20, 60)
        cloud.setKind(SpriteKind.Cloud)
        cloud.z = 1
    }
})
forever(function () {
    if (ground2.x < -1 * (scene.screenWidth() / 2)) {
        ground2.x = ground1.x + scene.screenWidth()
    }
})
forever(function () {
    if (ground1.x < -1 * (scene.screenWidth() / 2)) {
        ground1.x = ground2.x + scene.screenWidth()
    }
})
